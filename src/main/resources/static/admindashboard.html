<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #f8f9fa; }
        .sidebar { min-height: 100vh; background-color: #343a40; color: white; }
        .sidebar .nav-link { color: white; }
        .sidebar .nav-link.active { background-color: #495057; }
        .content-area {
            padding: 2rem;
            overflow-y: auto;
            max-height: 100vh;
        }
    </style>
</head>
<body>
<div class="container-fluid">
    <div class="row flex-nowrap">
        <!-- Sidebar -->
        <div class="col-md-3 sidebar p-3 position-sticky top-0 vh-100" style="z-index: 1020;">
            <h4 class="text-center mb-4">QuickCars Admin</h4>
            <div class="nav flex-column nav-pills" id="adminNav">
                <button class="nav-link active" data-section="inquiries">Rental Inquiries</button>
                <button class="nav-link" data-section="vehicles">Vehicles</button>
                <button class="btn btn-outline-light mt-4" onclick="logout()">Logout</button>
            </div>
        </div>

        <!-- Content Area -->
        <div class="col-md-9 content-area">
            <!-- Inquiries Section -->
            <div id="section-inquiries" class="section">
                <h3>Rental Inquiries</h3>
                <div class="table-responsive overflow-auto mt-3" style="max-height: 400px;">
                    <table class="table table-bordered table-hover text-center table-sm" id="inquiryTable">
                        <thead class="table-dark sticky-top">
                        <tr>
                            <th>Inquire ID</th>
                            <th>Created At</th>
                            <th>Vehicle ID</th>
                            <th>Contact</th>
                            <th>Pickup</th>
                            <th>Dropoff</th>
                            <th>Locations</th>
                            <th>Price (LKR)</th>
                            <th>Status</th>
                        </tr>
                        </thead>
                        <tbody></tbody>
                    </table>

                </div>
                <div class="d-flex align-items-center gap-2 mb-3">
                    <select id="reportMonth" class="form-select w-auto">
                        <option value="">Month</option>
                        <option value="1">January</option>
                        <option value="2">February</option>
                        <option value="3">March</option>
                        <option value="4">April</option>
                        <option value="5">May</option>
                        <option value="6">June</option>
                        <option value="7">July</option>
                        <option value="8">August</option>
                        <option value="9">September</option>
                        <option value="10">October</option>
                        <option value="11">November</option>
                        <option value="12">December</option>
                    </select>

                    <select id="reportYear" class="form-select w-auto">
                        <option value="">Year</option>
                        <option value="2024">2024</option>
                        <option value="2025">2025</option>
                    </select>

                    <button class="btn btn-outline-primary" onclick="generateReport()">Generate Report</button>
                    <button class="btn btn-outline-success" onclick="downloadReport()">Download CSV</button>
                </div>


            </div>

            <!-- Vehicles Section -->
            <div id="section-vehicles" class="section d-none">
                <h3>Vehicles</h3>
                <div class="table-responsive mb-4" style="max-height: 400px;">
                    <table class="table table-bordered table-hover text-center table-sm mb-0">
                        <thead class="table-dark sticky-top" style="top: 0; z-index: 100;">
                        <tr>
                            <th>ID</th>
                            <th>Name</th>
                            <th>Capacity</th>
                            <th>Fuel Economy</th>
                            <th>Day Price</th>
                            <th>Availability</th>
                            <th>Fuel Capacity</th>
                            <th>Vehicle Type</th>
                            <th>Fuel Type</th>
                            <th>Drive Type</th>
                        </tr>
                        </thead>
                        <tbody id="vehicleTableBody"></tbody>
                    </table>
                </div>

                <form id="vehicleForm" class="row g-3 needs-validation" novalidate>
                    <div class="col-md-4">
                        <input type="text" class="form-control" placeholder="Name" id="name" required pattern="^[A-Za-z0-9 ]+$">
                        <div class="invalid-feedback">Name must be alphanumeric only</div>
                    </div>

                    <div class="col-md-4">
                        <input type="text" class="form-control" placeholder="Capacity (e.g. 5 Seater)" id="capacity" required pattern="^\d+ Seater$">
                        <div class="invalid-feedback">Capacity must end with 'Seater' (e.g. '5 Seater')</div>
                    </div>

                    <div class="col-md-4">
                        <input type="text" class="form-control" placeholder="Fuel Economy (e.g. 16 km/l)" id="fuelEconomy" required pattern="^\d+(\.\d+)? km/l$">
                        <div class="invalid-feedback">Fuel economy must end with 'km/l' (e.g. '16 km/l')</div>
                    </div>

                    <div class="col-md-4">
                        <input type="number" class="form-control" placeholder="Day Price" id="dayPrice" required min="1000" max="999999" step="1">
                        <div class="invalid-feedback">Day price must be an integer â‰¥ 1000</div>
                    </div>

                    <div class="col-md-4">
                        <input type="number" class="form-control" placeholder="Availability (0 or 1)" id="availability" required min="0" max="1" step="1">
                        <div class="invalid-feedback">Availability must be 0 or 1</div>
                    </div>

                    <div class="col-md-4">
                        <input type="number" class="form-control" placeholder="Fuel Capacity (L)" id="fuelCapacityL" required min="30" max="80" step="1">
                        <div class="invalid-feedback">Fuel capacity must be between 30 and 80 liters</div>
                    </div>

                    <div class="col-md-4">
                        <select class="form-select" id="vehicleType" required>
                            <option value="">Vehicle Type</option>
                            <option value="CAR">CAR</option>
                            <option value="SUV">SUV</option>
                        </select>
                        <div class="invalid-feedback">Vehicle type is required</div>
                    </div>

                    <div class="col-md-4">
                        <select class="form-select" id="fuelType" required>
                            <option value="">Fuel Type</option>
                            <option value="DIESEL">DIESEL</option>
                            <option value="PETROL">PETROL</option>
                        </select>
                        <div class="invalid-feedback">Fuel type is required</div>
                    </div>

                    <div class="col-md-4">
                        <select class="form-select" id="driveType" required>
                            <option value="">Drive Type</option>
                            <option value="AUTO">AUTO</option>
                            <option value="MANUAL">MANUAL</option>
                        </select>
                        <div class="invalid-feedback">Drive type is required</div>
                    </div>

                    <div class="col-md-12">
                        <input type="text" class="form-control" placeholder="Image URL (e.g. /images/car.jpg)" id="imageurl" required pattern="^/images/.*">
                        <div class="invalid-feedback">Image URL must start with '/images/'</div>
                    </div>

                    <div class="col-md-12">
                        <button type="submit" class="btn btn-primary" id="saveVehicleBtn" disabled>Save Vehicle</button>
                    </div>
                </form>

            </div>

        </div>
    </div>
</div>

<!-- Scripts -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="/js/admindashboard.js"></script>
</body>
</html>
